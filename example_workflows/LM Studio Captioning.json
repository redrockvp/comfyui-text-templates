{
    "id": "8f4e2a1b-3c5d-4e6f-8a9b-1c2d3e4f5a6b",
    "revision": 0,
    "last_node_id": 12,
    "last_link_id": 12,
    "nodes": [
        {
            "id": 12,
            "type": "Note",
            "pos": [
                -480,
                -60
            ],
            "size": [
                450,
                500
            ],
            "flags": {},
            "order": 0,
            "mode": 0,
            "inputs": [],
            "outputs": [],
            "properties": {},
            "widgets_values": [
                "LM STUDIO IMAGE CAPTIONING WORKFLOW\n\nGenerate consistent captions for AI training datasets using a local vision model.\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\nHOW TO USE:\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n1. Set your image folder path in LoadImagesFromFolder\n2. Set your trigger word (e.g. ohwx_style)\n3. Describe your style in Style Context\n4. Optionally customize the User Prompt\n5. Run the workflow - captions save as .txt files\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\nREQUIRED CUSTOM NODES:\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\nText Templates:\nhttps://github.com/redrockvp/comfyui-text-templates\n\nLM Studio Image To Text:\nhttps://github.com/ExponentialML/ComfyUI_LMStudio\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\nTIPS:\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n• Use a consistent style description across your dataset\n• The trigger word appears at the start of every caption\n• Adjust temperature in LM Studio node for variety"
            ],
            "color": "#2a363b",
            "bgcolor": "#3d4f55"
        },
        {
            "id": 8,
            "type": "Note",
            "pos": [
                96,
                -197
            ],
            "size": [
                600,
                100
            ],
            "flags": {},
            "order": 1,
            "mode": 0,
            "inputs": [],
            "outputs": [],
            "properties": {},
            "widgets_values": [
                "IMAGE CAPTIONING FOR STYLE DATASETS\n\nThis workflow loads images from a folder, generates captions using a vision model, and saves each caption with the matching image filename. Edit the style name in TextBox and the prompt template in TextTemplate."
            ],
            "color": "#233",
            "bgcolor": "#355"
        },
        {
            "id": 4,
            "type": "Note",
            "pos": [
                504,
                822
            ],
            "size": [
                400,
                150
            ],
            "flags": {},
            "order": 1,
            "mode": 0,
            "inputs": [],
            "outputs": [],
            "properties": {},
            "widgets_values": [
                "CONNECT YOUR VISION MODEL HERE\n\nConnect LoadImagesFromFolder 'images' output and TextTemplate 'text' output to your LM Studio or other vision model node.\n\nThe vision model should output the caption text."
            ],
            "color": "#432",
            "bgcolor": "#653"
        },
        {
            "id": 1,
            "type": "LoadImagesFromFolder",
            "pos": [
                17.83636363636369,
                63.40000000000028
            ],
            "size": [
                320,
                166
            ],
            "flags": {},
            "order": 2,
            "mode": 0,
            "inputs": [
                {
                    "localized_name": "folder_path",
                    "name": "folder_path",
                    "type": "STRING",
                    "widget": {
                        "name": "folder_path"
                    },
                    "link": null
                },
                {
                    "localized_name": "index",
                    "name": "index",
                    "type": "INT",
                    "widget": {
                        "name": "index"
                    },
                    "link": null
                },
                {
                    "localized_name": "extension_filter",
                    "name": "extension_filter",
                    "shape": 7,
                    "type": "STRING",
                    "widget": {
                        "name": "extension_filter"
                    },
                    "link": null
                }
            ],
            "outputs": [
                {
                    "localized_name": "image",
                    "name": "image",
                    "type": "IMAGE",
                    "slot_index": 0,
                    "links": [
                        8
                    ]
                },
                {
                    "localized_name": "filename",
                    "name": "filename",
                    "type": "STRING",
                    "slot_index": 1,
                    "links": [
                        2
                    ]
                },
                {
                    "localized_name": "filename_with_ext",
                    "name": "filename_with_ext",
                    "type": "STRING",
                    "slot_index": 2,
                    "links": []
                },
                {
                    "localized_name": "total_images",
                    "name": "total_images",
                    "type": "INT",
                    "links": null
                }
            ],
            "properties": {
                "aux_id": "redrockvp/comfyui-text-templates",
                "ver": "e885069c658b21d9251d4515241afb89f71b2771",
                "Node name for S&R": "LoadImagesFromFolder"
            },
            "widgets_values": [
                "D:\\Media\\Images\\Midjourney\\Space Wanderers",
                "",
                ""
            ]
        },
        {
            "id": 3,
            "type": "TextTemplate",
            "pos": [
                510,
                30
            ],
            "size": [
                400,
                300
            ],
            "flags": {},
            "order": 7,
            "mode": 0,
            "inputs": [
                {
                    "localized_name": "text_1",
                    "name": "text_1",
                    "shape": 7,
                    "type": "STRING",
                    "link": 1
                },
                {
                    "localized_name": "text_2",
                    "name": "text_2",
                    "shape": 7,
                    "type": "STRING",
                    "link": 10
                },
                {
                    "localized_name": "text_3",
                    "name": "text_3",
                    "shape": 7,
                    "type": "STRING",
                    "link": null
                },
                {
                    "localized_name": "text_4",
                    "name": "text_4",
                    "shape": 7,
                    "type": "STRING",
                    "link": null
                },
                {
                    "localized_name": "text_5",
                    "name": "text_5",
                    "shape": 7,
                    "type": "STRING",
                    "link": null
                },
                {
                    "localized_name": "text_6",
                    "name": "text_6",
                    "shape": 7,
                    "type": "STRING",
                    "link": null
                },
                {
                    "localized_name": "template",
                    "name": "template",
                    "type": "STRING",
                    "widget": {
                        "name": "template"
                    },
                    "link": null
                }
            ],
            "outputs": [
                {
                    "localized_name": "text",
                    "name": "text",
                    "type": "STRING",
                    "slot_index": 0,
                    "links": [
                        7
                    ]
                }
            ],
            "properties": {
                "aux_id": "redrockvp/comfyui-text-templates",
                "ver": "e885069c658b21d9251d4515241afb89f71b2771",
                "Node name for S&R": "TextTemplate"
            },
            "widgets_values": [
                "You are captioning images for an AI training dataset.\n\nSTYLE CONTEXT:\n{1}\n\nTRIGGER WORD: {2}\nThis trigger word MUST appear at the start of every caption.\n\nDESCRIBE THIS IMAGE:\n1. Content - What is depicted: subjects, setting, actions, objects, spatial relationships\n2. Style - How it looks: colors, lighting, composition, textures, mood, artistic techniques\n\nWrite the caption starting with the trigger word, then describe both what is in the image and how it is rendered. Incorporate style elements from the context above where they apply. Be specific and precise - avoid vague terms like 'beautiful' or 'amazing'."
            ]
        },
        {
            "id": 6,
            "type": "SaveTextToFile",
            "pos": [
                1004.0010699999989,
                36.67001999999996
            ],
            "size": [
                320,
                120
            ],
            "flags": {},
            "order": 9,
            "mode": 0,
            "inputs": [
                {
                    "localized_name": "text",
                    "name": "text",
                    "type": "STRING",
                    "link": 11
                },
                {
                    "localized_name": "filename",
                    "name": "filename",
                    "type": "STRING",
                    "link": 2
                },
                {
                    "localized_name": "output_folder",
                    "name": "output_folder",
                    "type": "STRING",
                    "widget": {
                        "name": "output_folder"
                    },
                    "link": null
                },
                {
                    "localized_name": "extension",
                    "name": "extension",
                    "shape": 7,
                    "type": "STRING",
                    "widget": {
                        "name": "extension"
                    },
                    "link": null
                }
            ],
            "outputs": [
                {
                    "localized_name": "filepath",
                    "name": "filepath",
                    "type": "STRING",
                    "slot_index": 0,
                    "links": []
                }
            ],
            "properties": {
                "aux_id": "redrockvp/comfyui-text-templates",
                "ver": "e885069c658b21d9251d4515241afb89f71b2771",
                "Node name for S&R": "SaveTextToFile"
            },
            "widgets_values": [
                "D:\\Media\\Images\\Midjourney\\Space Wanderers",
                ".txt"
            ]
        },
        {
            "id": 5,
            "type": "Note",
            "pos": [
                1012.7000000000007,
                219.99999999999991
            ],
            "size": [
                350,
                150
            ],
            "flags": {},
            "order": 5,
            "mode": 0,
            "inputs": [],
            "outputs": [],
            "properties": {},
            "widgets_values": [
                "Connect your vision model's text output here, replacing the ShowText connection.\n\nThe SaveTextToFile node will save each caption with the matching image filename."
            ],
            "color": "#432",
            "bgcolor": "#653"
        },
        {
            "id": 9,
            "type": "Expo Lmstudio Image To Text",
            "pos": [
                518,
                395
            ],
            "size": [
                270,
                370
            ],
            "flags": {},
            "order": 8,
            "mode": 0,
            "inputs": [
                {
                    "localized_name": "image",
                    "name": "image",
                    "type": "IMAGE",
                    "link": 8
                },
                {
                    "localized_name": "user_prompt",
                    "name": "user_prompt",
                    "type": "STRING",
                    "widget": {
                        "name": "user_prompt"
                    },
                    "link": 12
                },
                {
                    "localized_name": "system_prompt",
                    "name": "system_prompt",
                    "type": "STRING",
                    "widget": {
                        "name": "system_prompt"
                    },
                    "link": 7
                },
                {
                    "localized_name": "model_key",
                    "name": "model_key",
                    "type": "STRING",
                    "widget": {
                        "name": "model_key"
                    },
                    "link": null
                },
                {
                    "localized_name": "auto_unload",
                    "name": "auto_unload",
                    "type": "COMBO",
                    "widget": {
                        "name": "auto_unload"
                    },
                    "link": null
                },
                {
                    "localized_name": "unload_delay",
                    "name": "unload_delay",
                    "type": "INT",
                    "widget": {
                        "name": "unload_delay"
                    },
                    "link": null
                },
                {
                    "localized_name": "seed",
                    "name": "seed",
                    "type": "INT",
                    "widget": {
                        "name": "seed"
                    },
                    "link": null
                },
                {
                    "localized_name": "max_tokens",
                    "name": "max_tokens",
                    "shape": 7,
                    "type": "INT",
                    "widget": {
                        "name": "max_tokens"
                    },
                    "link": null
                },
                {
                    "localized_name": "temperature",
                    "name": "temperature",
                    "shape": 7,
                    "type": "FLOAT",
                    "widget": {
                        "name": "temperature"
                    },
                    "link": null
                },
                {
                    "localized_name": "debug",
                    "name": "debug",
                    "shape": 7,
                    "type": "BOOLEAN",
                    "widget": {
                        "name": "debug"
                    },
                    "link": null
                },
                {
                    "localized_name": "timeout_seconds",
                    "name": "timeout_seconds",
                    "shape": 7,
                    "type": "INT",
                    "widget": {
                        "name": "timeout_seconds"
                    },
                    "link": null
                },
                {
                    "localized_name": "model",
                    "name": "model",
                    "shape": 7,
                    "type": "STRING",
                    "widget": {
                        "name": "model"
                    },
                    "link": null
                },
                {
                    "localized_name": "ip_address",
                    "name": "ip_address",
                    "shape": 7,
                    "type": "STRING",
                    "widget": {
                        "name": "ip_address"
                    },
                    "link": null
                },
                {
                    "localized_name": "port",
                    "name": "port",
                    "shape": 7,
                    "type": "INT",
                    "widget": {
                        "name": "port"
                    },
                    "link": null
                }
            ],
            "outputs": [
                {
                    "localized_name": "Description",
                    "name": "Description",
                    "type": "STRING",
                    "links": [
                        11
                    ]
                }
            ],
            "properties": {
                "cnr_id": "comfyui-lmstudio-image-to-text-node",
                "ver": "1.1.21",
                "Node name for S&R": "Expo Lmstudio Image To Text"
            },
            "widgets_values": [
                "Describe this image in detail",
                "This is a chat between a user and an assistant. The assistant is an expert in describing images, with detail and accuracy",
                "qwen/qwen3-vl-4b",
                "True",
                0,
                498655329440691,
                "randomize",
                1000,
                0.7,
                false,
                300,
                "",
                "",
                0
            ]
        },
        {
            "id": 10,
            "type": "TextBox",
            "pos": [
                19.573541945904527,
                533.9794136213378
            ],
            "size": [
                374.69999999999993,
                173.60000000000002
            ],
            "flags": {},
            "order": 4,
            "mode": 0,
            "inputs": [
                {
                    "localized_name": "text",
                    "name": "text",
                    "type": "STRING",
                    "widget": {
                        "name": "text"
                    },
                    "link": null
                }
            ],
            "outputs": [
                {
                    "localized_name": "text",
                    "name": "text",
                    "type": "STRING",
                    "links": [
                        10
                    ]
                }
            ],
            "title": "Trigger Word",
            "properties": {
                "aux_id": "redrockvp/comfyui-text-templates",
                "ver": "e885069c658b21d9251d4515241afb89f71b2771",
                "Node name for S&R": "TextBox"
            },
            "widgets_values": [
                "ateyghailan"
            ]
        },
        {
            "id": 2,
            "type": "TextBox",
            "pos": [
                31.800000000000118,
                783.9000000000003
            ],
            "size": [
                348.5999999999999,
                182.10000000000014
            ],
            "flags": {},
            "order": 3,
            "mode": 0,
            "inputs": [
                {
                    "localized_name": "text",
                    "name": "text",
                    "type": "STRING",
                    "widget": {
                        "name": "text"
                    },
                    "link": null
                }
            ],
            "outputs": [
                {
                    "localized_name": "text",
                    "name": "text",
                    "type": "STRING",
                    "slot_index": 0,
                    "links": [
                        1
                    ]
                }
            ],
            "title": "Style Context",
            "properties": {
                "aux_id": "redrockvp/comfyui-text-templates",
                "ver": "e885069c658b21d9251d4515241afb89f71b2771",
                "Node name for S&R": "TextBox"
            },
            "widgets_values": [
                "Atey Ghailan inspired western stylized artstyle"
            ]
        },
        {
            "id": 11,
            "type": "TextBox",
            "pos": [
                21.06279814425149,
                277.4521408940648
            ],
            "size": [
                381.29999999999995,
                200
            ],
            "flags": {},
            "order": 6,
            "mode": 0,
            "inputs": [
                {
                    "localized_name": "text",
                    "name": "text",
                    "type": "STRING",
                    "widget": {
                        "name": "text"
                    },
                    "link": null
                }
            ],
            "outputs": [
                {
                    "localized_name": "text",
                    "name": "text",
                    "type": "STRING",
                    "links": [
                        12
                    ]
                }
            ],
            "title": "User Prompt",
            "properties": {
                "aux_id": "redrockvp/comfyui-text-templates",
                "ver": "e885069c658b21d9251d4515241afb89f71b2771",
                "Node name for S&R": "TextBox"
            },
            "widgets_values": [
                "Describe this image in detail for AI training. Start with the trigger word, then describe the content and visual style."
            ]
        }
    ],
    "links": [
        [
            1,
            2,
            0,
            3,
            0,
            "STRING"
        ],
        [
            2,
            1,
            1,
            6,
            1,
            "STRING"
        ],
        [
            7,
            3,
            0,
            9,
            2,
            "STRING"
        ],
        [
            8,
            1,
            0,
            9,
            0,
            "IMAGE"
        ],
        [
            10,
            10,
            0,
            3,
            1,
            "STRING"
        ],
        [
            11,
            9,
            0,
            6,
            0,
            "STRING"
        ],
        [
            12,
            11,
            0,
            9,
            1,
            "STRING"
        ]
    ],
    "groups": [
        {
            "id": 1,
            "title": "Image Input & Style Context",
            "bounding": [
                -5.799999999999962,
                -66.6,
                449.0999999999999,
                1074.7999999999997
            ],
            "color": "#8A8",
            "font_size": 24,
            "flags": {}
        },
        {
            "id": 2,
            "title": "Prompt Template",
            "bounding": [
                480,
                -60,
                465,
                1067
            ],
            "color": "#88A",
            "font_size": 24,
            "flags": {}
        },
        {
            "id": 3,
            "title": "Output",
            "bounding": [
                979.5000000000005,
                -60,
                413.29025,
                474.3888700000001
            ],
            "color": "#A88",
            "font_size": 24,
            "flags": {}
        }
    ],
    "config": {},
    "extra": {
        "ds": {
            "scale": 0.9090909090909091,
            "offset": [
                829.2372018557486,
                229.64785910593503
            ]
        },
        "workflowRendererVersion": "LG"
    },
    "version": 0.4
}